# 상표 검색 API

상표 데이터를 검색할 수 있는 FastAPI 기반의 REST API입니다.

## 기능

### 1. 상표명 검색 기능
- 상표명/영문명 키워드 검색
  - 대소문자 구분 없는 검색 지원
  - 부분 일치 검색 지원
  - 유사도 검색 옵션 제공 (40% 이상 유사도 기준)

### 2. 기타 검색 기능
- 등록 상태 필터링
- 출원일 기간 검색
- 출원번호 검색
- 공고번호 검색
- 등록번호 검색
- 국제등록번호 검색
- 우선권주장번호 검색
- 상품 주 분류 코드 필터링
  - 쉼표로 구분된 다중 코드 검색 지원
  - 한 자리 수 코드 자동 보정 (예: 1 → 01)
- 결과 수 제한

### 3. 기타 기능
- 페이지네이션 지원
  - 전체 결과 수 제공
  - 전체 페이지 수 계산
  - 페이지당 결과 수 제한
- 검색 결과 정렬
  - 유사도 검색 시 유사도 점수 기반 정렬

## 설치 및 실행 방법

1. 가상 환경 설치:
```bash
python -m venv venv
```

2. 가상환경 실행
```bash
source venv/Scripts/activate
```

3. 필요한 패키지 설치:
```bash
pip install -r requirements.txt
```

4. 서버 실행:
```bash
uvicorn app.main:app --reload
```

5. API 문서 확인:
- Swagger UI: http://localhost:8000/docs

## API 사용 예시

### 상표 검색
```
GET /searchmarks/search?productName=프레스카&status=등록&product_code=30&limit=10
```

### 유사도 기반반 검색 예시
```
GET /searchmarks/search?productName=프레스카&status=등록&product_code=30&limit=10&use_fuzzy_search=true
'''

## 기술적 의사결정

1. **FastAPI 선택 이유**
   - 자동 API 문서화 (Swagger/ReDoc)
   - 빠른 성능
   - 타입 힌팅 지원
   - 비동기 처리 지원

2. **데이터 처리**
   - JSON 파일을 메모리에 로드하여 처리
   - Pandas DataFrame 변환 지원

3. **검색 기능**
   - 부분 일치 검색 지원
   - 다중 필터링 지원
   - 결과 수 제한으로 성능 보장
   - 유사도 검색을 위한 RapidFuzz 라이브러리 활용


## 개발 과정에서의 고민과 해결


1. **상표명 검색 기능**
   - 상표검색 기능은 주로 사용자가 본인의 상표의 상태나 정보를 알아보기위해 검색하거나,
   - 앞으로 사용하고 싶은 상표와 유사한 상표가 있는지의 여부를 판단하기 위해 기능을 사용할 것이라고 판단했습니다.
   - 그래서 기존의 단순검색만으로는 유사한 상표를 검색하기에는 어려움이 있다고 판단하여, 
   - 'rapidfuzz'를 사용하여 유사도 기반의 검색기능을 구현했습니다.
   - 사용자의 판단에 따라 단순검색을 사용하거나 유사도 기반의 검색기능을 사용할 수 있도록 구현했으며,
   - 비슷한 느낌의 상표명을 검색하는 것이 목적이라고 생각하여, 상대적으로 낮은 유사도 검색값(40%)을 설정했습니다.

2. **주 분류 검색 기능**
   - 위의 경우와 마찬가지로, 같은 상표명을 가지는 주 분류 코드를 검색할때,
   - 여러 코드를 검색하는 경우가 있을 수 있다고 판단하여, 
   - 다른 항목들과는 다르게, ','(쉼표)를 기준으로 여러개의 검색을 할 수 있도록 구현하였습니다.
   - 더해, 사용자의 편의성을 고려하여, 
   - 원본 데이터에는 주 분류 코드가 '05','07' 같이 한자리수의 경우, 숫자의 앞에 '0'이 붙게 됩니다. 
   - 그렇기 때문에 검색기능을 사용할때, 이를 사용자가 고려하여, 검색할때 '0'를 붙여야했습니다.
   - 이는 비효율적이라고 판단하여, 코드로 처리하여, 한자리수의 경우는 자동으로 변환할 수 있도록 처리하였습니다.

3. **검색 항목**
   - 현재 api에서 구현된 검색 항목은 아래와 같습니다.
   - productName: 상표명(한글)
   - productNameEng: 상표명(영문)
   - applicationNumber: 출원 번호
   - publicationNumber: 공고 번호
   - registrationNumber: 등록 번호
   - internationalRegNumbers: 국제 출원 번호
   - priorityClaimNumList: 우선권 번호
   - asignProductMainCodeList: 상품 주 분류 코드 리스트
   - viennaCodeList: 비엔나 코드 리스트트
   - 검색 항목에 무엇을 더하고, 무엇을 뺄지 많은 고민을 했습니다..
   - 그 결과 날짜 같은 경우는 검색기능에서 크게 중요도가 높지 않다고 판단하여,
   - 검색항목에서 제거하게 되었습니다.


## 개선 방향 및 아쉬운점


1. **검색 기능 강화**
   - 유사도 검색 기능이 작동하긴하지만, 만족스러울 정도의 결과를 보여주지 않아 추후 좀더 원하는 방향으로 검색기능이 작동하도록 개선하고 싶습니다.

2. **프론트 엔드 구현**
   - api 에 맞게 